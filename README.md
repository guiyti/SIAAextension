# üìö SIAA Data Extractor v2.0.5

Uma extens√£o moderna e profissional para Chrome/Edge que permite extrair, visualizar e analisar dados acad√™micos do Sistema SIAA da Universidade Cruzeiro do Sul com interface elegante e funcionalidades avan√ßadas.

## üåü Novidades v2.0.5

### üé® **Interface S√≥bria e Profissional**
- **Design Unificado**: Interface consistente em toda aplica√ß√£o com gradientes sutis e sombras elegantes
- **Estilo Glassmorphism**: Efeitos de backdrop blur e transpar√™ncias modernas
- **Cores Harmoniosas**: Paleta s√≥bria em tons de cinza, branco e acentos azuis
- **Experi√™ncia Visual Premium**: Anima√ß√µes suaves e feedback visual refinado

### üîß **Melhorias de Usabilidade**
- **Filtros Inteligentes**: Sistema aprimorado sem adi√ß√£o autom√°tica de ponto e v√≠rgula
- **Filtros Independentes**: Estados completamente isolados entre visualiza√ß√µes de Ofertas e Alunos
- **Interface Otimizada**: Layout reorganizado com melhor distribui√ß√£o de elementos
- **Nomes de Cursos Completos**: Exibi√ß√£o de nomes completos no popup usando mapeamento inteligente

### ‚ö° **Performance e Confiabilidade**
- **Mapeamento Persistente**: Nomes de cursos salvos automaticamente no storage
- **Sistema Robusto**: Tratamento avan√ßado de erros de contexto da extens√£o
- **Mesclagem Inteligente**: Dados de alunos mesclados automaticamente como ofertas
- **Avisos Contextuais**: Notifica√ß√µes espec√≠ficas para falhas de salvamento

## üöÄ Funcionalidades Principais

### üîç **Extra√ß√£o de Dados Avan√ßada**
- **Ofertas de Disciplinas**: C√≥digo, nome, campus, hor√°rios, professores, vagas e matr√≠culas
- **Dados de Alunos**: RGM, nome, e-mail, turma, turno, situa√ß√£o + Nome do Curso e Sigla Campus
- **Captura Inteligente**: Sistema que detecta e captura dados de m√∫ltiplos campus automaticamente
- **Deduplica√ß√£o Visual**: Interface para sele√ß√£o manual de duplicatas a serem removidas
- **Mapeamento de Cursos**: Sistema autom√°tico que relaciona c√≥digos de curso com nomes completos

### üìä **Visualiza√ß√£o e An√°lise Moderna**
- **Interface Responsiva**: Design adapt√°vel para desktop e mobile com layout otimizado
- **Filtros Avan√ßados Independentes**: Estados isolados por visualiza√ß√£o (Ofertas/Alunos)
- **Filtros M√∫ltiplos**: Suporte a m√∫ltiplos valores usando ponto e v√≠rgula (`;`)
- **Ordena√ß√£o Din√¢mica**: Clique nas colunas para ordenar com indicadores visuais
- **Presets Inteligentes**: Configura√ß√µes predefinidas para diferentes necessidades
- **Altern√¢ncia Fluida**: Transi√ß√£o suave entre modos de visualiza√ß√£o
- **Contadores em Tempo Real**: Estat√≠sticas atualizadas dinamicamente

### üìã **Gerenciamento de Dados Profissional**
- **Exporta√ß√£o Flex√≠vel**: CSV completo ou apenas registros filtrados
- **Importa√ß√£o e Mesclagem**: Combine dados de diferentes capturas automaticamente
- **Gerenciamento Visual de Colunas**: Interface intuitiva para ocultar/exibir e reordenar
- **Armazenamento Confi√°vel**: Dados salvos com verifica√ß√£o de integridade
- **Backup Autom√°tico**: Sistema de persist√™ncia com avisos de falha

## üõ†Ô∏è Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos
- **Navegador**: Google Chrome ou Microsoft Edge (vers√£o recente)
- **Acesso**: SIAA da Universidade Cruzeiro do Sul
- **Credenciais**: Login v√°lido no sistema acad√™mico

### Instala√ß√£o
1. **Baixe** a extens√£o ou clone o reposit√≥rio
2. **Abra** Chrome/Edge ‚Üí Extens√µes ‚Üí Modo Desenvolvedor
3. **Carregue** a pasta da extens√£o
4. **Ative** a extens√£o na barra de ferramentas

## üìñ Guia de Uso Completo

### 1Ô∏è‚É£ **Captura de Dados**

#### Prepara√ß√£o
1. **Acesse o SIAA**: Fa√ßa login em https://siaa.cruzeirodosul.edu.br
2. **Navegue para**: Acad√™mico ‚Üí Consultas ‚Üí Consultas De Ofertas Por Curso
3. **Verifique**: Se a p√°gina carregou corretamente

#### Processo de Captura
1. **Ative a Extens√£o**: Clique no √≠cone da extens√£o (interface s√≥bria aparecer√°)
2. **Selecione o Curso**: Dropdown mostra nomes completos dos cursos
3. **Inicie Captura**: Clique em "üîÑ Capturar Dados"
4. **Acompanhe**: Progresso em tempo real com mensagens informativas
5. **Aguarde**: Captura autom√°tica de ofertas e dados de alunos
6. **Verifica√ß√£o**: Sistema confirma salvamento com avisos se houver falha

#### Recursos da Captura
- **Mesclagem Autom√°tica**: Novos dados s√£o combinados com existentes
- **Mapeamento de Cursos**: Nomes completos salvos automaticamente
- **Verifica√ß√£o de Integridade**: Avisos se dados n√£o foram salvos
- **Recupera√ß√£o de Erros**: Sistema robusto com tratamento de falhas

### 2Ô∏è‚É£ **Visualiza√ß√£o de Dados**

#### Interface Principal
1. **Abra o Viewer**: Clique em "üëÅÔ∏è Visualizar" (abre interface moderna)
2. **Layout Otimizado**: Header com controles centralizados e estat√≠sticas
3. **Navega√ß√£o**: Bot√µes "üìä Ofertas" e "üë• Alunos" para alternar modos

#### Sistema de Filtros Avan√ßado
- **Filtros da Sidebar**: Campus, per√≠odo, disciplina, professor, curso, hor√°rio
- **Filtros por Coluna**: Input em cada cabe√ßalho com sugest√µes inteligentes
- **M√∫ltiplos Valores**: Use `;` para filtrar v√°rios valores simultaneamente
- **Estados Independentes**: Filtros de Ofertas n√£o afetam visualiza√ß√£o de Alunos
- **Limpeza Contextual**: Bot√£o "üßπ Limpar Filtros" limpa apenas modo atual

#### Funcionalidades Visuais
- **Contadores Din√¢micos**: Total e filtrados atualizados em tempo real
- **Indicadores Visuais**: Colunas ativas destacadas com bordas azuis
- **Sugest√µes Contextuais**: Dropdown com valores √∫nicos baseados em dados
- **Feedback Imediato**: Anima√ß√µes e transi√ß√µes suaves

### 3Ô∏è‚É£ **Gerenciamento de Colunas**

#### Configura√ß√£o Visual
1. **Acesse**: Bot√£o "üìä Organizar Colunas" no header central
2. **Interface Intuitiva**: Checkboxes para visibilidade de colunas
3. **Presets Inteligentes**: Configura√ß√µes predefinidas por contexto
4. **Salvamento Autom√°tico**: Prefer√™ncias mantidas entre sess√µes

#### Op√ß√µes Dispon√≠veis
- **Reordena√ß√£o**: Drag & drop para reorganizar colunas
- **Visibilidade**: Toggle individual para cada campo
- **Redimensionamento**: Ajuste de largura por coluna
- **Reset Inteligente**: Volta ao preset selecionado

### 4Ô∏è‚É£ **Exporta√ß√£o e Backup**

#### Menu Hamburger Moderno
1. **Acesse**: Bot√£o hamburger elegante no header esquerdo
2. **Interface S√≥bria**: Menu lateral com categorias organizadas
3. **Bot√µes Uniformes**: Design consistente com gradientes sutis

#### Op√ß√µes de Exporta√ß√£o
- **üì• Exportar Vis√≠vel**: Apenas dados filtrados atualmente
- **‚¨áÔ∏è Exportar CSV Completo**: Todos os dados do modo atual
- **üìã Copiar Tabela Vis√≠vel**: Para √°rea de transfer√™ncia
- **üîÅ Importar e Mesclar**: Combina dados de arquivo CSV

#### Ferramentas de Manuten√ß√£o
- **üîÑ Limpar Duplicatas**: Interface visual para sele√ß√£o de registros
- **üóëÔ∏è Limpar Todos os Dados**: Reset completo com confirma√ß√£o
- **‚ûï Adicionar Curso**: Modal elegante para cursos manuais

## ‚öôÔ∏è Configura√ß√£o Avan√ßada

### Sistema de Presets

#### Para Ofertas de Disciplinas
```json
{
  "PRESET_1_BASICO": {
    "name": "B√°sico",
    "order": ["C√≥d. Disc.", "Nome Disciplina", "Sigla Campus", "Hora", "Nome Professor"],
    "visible": ["C√≥d. Disc.", "Nome Disciplina", "Sigla Campus", "Hora", "Nome Professor"]
  },
  "PRESET_2_DETALHADO": {
    "name": "Detalhado", 
    "order": ["C√≥d. Disc.", "Nome Disciplina", "Sigla Campus", "Hora", "Nome Professor", "Vagas", "Matriculados", "Vagas Restantes"],
    "visible": ["C√≥d. Disc.", "Nome Disciplina", "Sigla Campus", "Hora", "Nome Professor", "Vagas", "Matriculados"]
  }
}
```

#### Para Dados de Alunos
```json
{
  "PADRAO": {
    "name": "Padr√£o",
    "order": ["RGM", "Nome", "E-mail", "Nome do Curso", "Sigla Campus"],
    "visible": ["RGM", "Nome", "E-mail", "Nome do Curso", "Sigla Campus"]
  },
  "PRESET_3_CURSO": {
    "name": "Foco em Curso",
    "order": ["Nome do Curso", "Sigla Campus", "RGM", "Nome", "Turma", "Turno"],
    "visible": ["Nome do Curso", "Sigla Campus", "RGM", "Nome", "Turma"]
  }
}
```

### Configura√ß√£o Centralizada

#### Arquivo siaa-config.json
```json
{
  "api": {
    "academicPeriod": {
      "note": "Per√≠odo obtido dinamicamente do sistema"
    },
    "extraction": {
      "batchSize": 10,
      "delayBetweenBatches": 800,
      "timeout": 30000
    }
  },
  "ui": {
    "theme": "sober",
    "animations": true,
    "compactMode": false
  },
  "features": {
    "autoMerge": true,
    "courseMapping": true,
    "independentFilters": true
  }
}
```

## üìä Estrutura de Dados

### Ofertas de Disciplinas (Campos Principais)
| Coluna | Descri√ß√£o | Fonte |
|--------|-----------|--------|
| C√≥d. Disc. | C√≥digo √∫nico da disciplina | SIAA XML |
| Nome Disciplina | Nome completo da disciplina | Processamento |
| Sigla Campus | Campus (SM, AF, LIB, etc.) | Mapeamento |
| Hora | Hor√°rios formatados | Processamento |
| Nome Professor | Professor respons√°vel | SIAA XML |
| Vagas | Vagas dispon√≠veis | SIAA XML |
| Matriculados | Alunos matriculados | SIAA XML |
| Vagas Restantes | Calculado automaticamente | Sistema |

### Dados de Alunos (Campos Principais)
| Coluna | Descri√ß√£o | Fonte |
|--------|-----------|--------|
| RGM | Registro Geral de Matr√≠cula | SIAA XML |
| Nome | Nome completo do aluno | SIAA XML |
| E-mail | Endere√ßo eletr√¥nico | SIAA XML |
| Nome do Curso | Nome completo do curso | Mapeamento |
| Sigla Campus | Campus de matr√≠cula | Mapeamento |
| Turma | C√≥digo da turma | SIAA XML |
| Turno | Per√≠odo de aulas | SIAA XML |
| Situa√ß√£o | Status da matr√≠cula | SIAA XML |

## üîí Seguran√ßa e Privacidade

### Prote√ß√£o de Dados
- **Armazenamento Local**: Todos os dados ficam no navegador do usu√°rio
- **Sem Transmiss√£o Externa**: Nenhuma informa√ß√£o enviada para servidores
- **Criptografia Nativa**: Usa sistema de storage seguro do Chrome
- **Controle Total**: Usu√°rio pode limpar dados a qualquer momento

### Permiss√µes Necess√°rias
- **activeTab**: Acesso controlado apenas √† aba do SIAA
- **storage**: Armazenamento local de prefer√™ncias e dados
- **scripting**: Execu√ß√£o de scripts para extra√ß√£o (somente no SIAA)

### Conformidade
- **LGPD**: Dados processados localmente sem compartilhamento
- **Transpar√™ncia**: C√≥digo aberto para auditoria
- **Controle**: Usu√°rio tem controle total sobre seus dados

## üîß Solu√ß√£o de Problemas

### Problemas Comuns e Solu√ß√µes

#### "Dados n√£o puderam ser salvos. Recarregue o SIAA"
**Sintomas**: Aviso vermelho pulsante no popup
**Causas**: 
- Contexto da extens√£o invalidado
- Falha na comunica√ß√£o entre scripts
- Storage temporariamente indispon√≠vel

**Solu√ß√µes**:
1. **Recarregue** a p√°gina do SIAA (F5)
2. **Reinicie** a extens√£o se necess√°rio
3. **Limpe cache** do navegador
4. **Verifique** se n√£o h√° atualiza√ß√µes da extens√£o

#### "Extension context invalidated"
**Sintomas**: Erro no console ap√≥s reiniciar extens√£o
**Causa**: Scripts antigos tentando comunicar com contexto recarregado
**Solu√ß√£o**: **Recarregue** a p√°gina do SIAA

#### Filtros afetando visualiza√ß√£o errada
**Sintomas**: Filtros de Alunos aparecendo em Ofertas
**Causa**: Bug em vers√µes anteriores (corrigido na v2.0.5)
**Solu√ß√£o**: **Atualize** para vers√£o atual

#### Nomes de curso n√£o aparecem
**Sintomas**: S√≥ c√≥digos num√©ricos no popup/dados
**Causa**: Primeira execu√ß√£o sem mapeamento
**Solu√ß√£o**: **Execute** uma captura completa para popular mapeamento

### Logs de Debug

Abra Console do Desenvolvedor (F12) para diagn√≥stico:

```
üîß [CONFIG] Sistema de configura√ß√£o iniciado
üåê [API] Buscando cursos dispon√≠veis...
üìö [MAPPING] Curso mapeado: 68 -> CST em AN√ÅLISE...
üìä [DATA] Dados processados: 1247 ofertas, 3891 alunos
‚úÖ [STORAGE] Dados salvos com sucesso
‚ùå [ERROR] Falha na comunica√ß√£o - recarregue p√°gina
```

### Performance

#### Otimiza√ß√£o de Uso
- **Filtre progressivamente**: Use filtros para reduzir dados exibidos
- **Capture por curso**: Melhor performance que captura global
- **Exporte seletivamente**: Apenas dados necess√°rios
- **Mantenha atualizado**: Vers√µes novas t√™m melhor performance

#### Limites T√©cnicos
- **M√°ximo recomendado**: 10.000 registros por visualiza√ß√£o
- **Timeout de captura**: 30 segundos por requisi√ß√£o
- **Storage local**: Limitado pelo navegador (~5-10MB)

## üéØ Casos de Uso Avan√ßados

### 1. An√°lise de Ocupa√ß√£o por Campus
```
1. Capture dados de todos os cursos
2. Filtre por "Sigla Campus" = "SM;AF;LIB" 
3. Configure preset "Detalhado" para ver vagas
4. Exporte para an√°lise de ocupa√ß√£o
```

### 2. Relat√≥rio de Alunos por Curso
```
1. Alterne para modo "üë• Alunos"
2. Filtre por "Nome do Curso" = curso desejado
3. Configure preset "Foco em Curso"
4. Exporte lista de alunos
```

### 3. Monitoramento de Hor√°rios
```
1. Use filtro "Hor√°rio" com m√∫ltiplos valores
2. Exemplo: "Segunda;Ter√ßa;19:10" 
3. Identifique conflitos de hor√°rio
4. Exporte relat√≥rio de sobreposi√ß√µes
```

### 4. Backup e Restore Completo
```
1. Menu hamburger ‚Üí "‚¨áÔ∏è Exportar CSV Completo"
2. Salve arquivos de Ofertas e Alunos
3. Para restaurar: "‚¨ÜÔ∏è Importar CSV Completo"
4. Use "üîÅ Importar e Mesclar" para combinar dados
```

## üèóÔ∏è Arquitetura T√©cnica

### Componentes Principais

#### Frontend
- **popup.html/js**: Interface principal com design s√≥brio
- **viewer.html/js**: Visualizador com filtros independentes  
- **Styling**: CSS moderno com gradientes e sombras

#### Backend
- **background.js**: Service Worker com storage robusto
- **content.js**: Bridge com tratamento de contexto
- **injected.js**: Extra√ß√£o com mapeamento de cursos

#### Configura√ß√£o
- **config-manager.js**: Sistema centralizado de configura√ß√£o
- **xml-processor.js**: Processamento inteligente de dados
- **siaa-config.json**: Configura√ß√µes externalizadas

### Fluxo de Dados

```mermaid
graph TD
    A[SIAA Page] --> B[injected.js]
    B --> C[content.js] 
    C --> D[background.js]
    D --> E[Chrome Storage]
    E --> F[viewer.js]
    F --> G[User Interface]
    
    H[config-manager.js] --> B
    H --> F
    I[xml-processor.js] --> B
```

### Inova√ß√µes v2.0.5

#### Sistema de Mapeamento
```javascript
// Mapeamento persistente de cursos
window.__SIAA_CURSO_MAPPING = new Map();

// Salvamento autom√°tico
async function saveCursoMapping() {
    const mappingObj = Object.fromEntries(__SIAA_CURSO_MAPPING);
    await chrome.storage.local.set({siaa_curso_mapping: mappingObj});
}
```

#### Filtros Independentes
```javascript
// Estados isolados por modo
let filterStates = {
    ofertas: { columnFilters: {} },
    alunos: { columnFilters: {} }
};

// Acesso contextual
function getCurrentColumnFilters() {
    return filterStates[currentViewMode].columnFilters;
}
```

#### Interface S√≥bria
```css
/* Gradientes elegantes */
.btn-primary {
    background: linear-gradient(135deg, 
        rgba(255,255,255,0.95) 0%, 
        rgba(248,250,252,0.95) 100%);
    border-left: 3px solid #3b82f6;
    box-shadow: 0 2px 8px rgba(59,130,246,0.15);
}
```

## üìà Roadmap e Melhorias Futuras

### Vers√£o 2.1.0 (Planejada)
- [ ] **Dashboard Anal√≠tico**: Gr√°ficos e estat√≠sticas visuais
- [ ] **Exporta√ß√£o Multi-formato**: PDF, Excel, JSON
- [ ] **Filtros Salvos**: Presets de filtros personalizados
- [ ] **Modo Escuro**: Tema alternativo elegante

### Vers√£o 2.2.0 (Planejada)  
- [ ] **API de Integra√ß√£o**: Webhooks para sistemas externos
- [ ] **Relat√≥rios Agendados**: Capturas autom√°ticas programadas
- [ ] **Compara√ß√£o Temporal**: An√°lise de mudan√ßas entre per√≠odos
- [ ] **Alertas Inteligentes**: Notifica√ß√µes de mudan√ßas importantes

### Melhorias Cont√≠nuas
- [ ] **Performance**: Otimiza√ß√£o para grandes volumes de dados
- [ ] **Acessibilidade**: Conformidade WCAG 2.1
- [ ] **Internacionaliza√ß√£o**: Suporte multi-idioma
- [ ] **Mobile**: Interface otimizada para tablets

## üìÑ Changelog Detalhado

### v2.0.5 (Atual) üåü
- ‚úÖ **Interface S√≥bria Completa**: Design unificado com gradientes e sombras
- ‚úÖ **Filtros Inteligentes**: Sem adi√ß√£o autom√°tica de ponto e v√≠rgula
- ‚úÖ **Estados Independentes**: Filtros isolados entre Ofertas/Alunos
- ‚úÖ **Mapeamento de Cursos**: Nomes completos persistentes
- ‚úÖ **Layout Otimizado**: Header reorganizado com controles centrais
- ‚úÖ **Avisos Contextuais**: Notifica√ß√µes espec√≠ficas para falhas
- ‚úÖ **Robustez Melhorada**: Tratamento avan√ßado de erros de contexto

### v2.0.0 
- ‚úÖ **Mesclagem de Alunos**: Dados combinados automaticamente
- ‚úÖ **Campos Enriquecidos**: Nome do Curso e Sigla Campus
- ‚úÖ **Filtros M√∫ltiplos**: Suporte a valores separados por `;`
- ‚úÖ **Deduplica√ß√£o Visual**: Interface para sele√ß√£o de duplicatas
- ‚úÖ **Sistema Robusto**: Comunica√ß√£o confi√°vel entre componentes

### v1.3.0
- ‚úÖ **Configura√ß√£o Centralizada**: Sistema unificado em JSON
- ‚úÖ **Verifica√ß√£o de Endpoints**: Sa√∫de de ofertas e alunos  
- ‚úÖ **Presets Externalizados**: Configura√ß√µes flex√≠veis
- ‚úÖ **Interface Responsiva**: Design adapt√°vel
- ‚úÖ **Suporte Completo**: Dados de alunos integrados

## ü§ù Suporte e Comunidade

### Canais de Suporte
- **Documenta√ß√£o**: Este README.md (sempre atualizado)
- **Configura√ß√£o**: Edite `siaa-config.json` para personaliza√ß√µes
- **Issues**: Reporte problemas com logs detalhados
- **Desenvolvimento**: Contribui√ß√µes bem-vindas

### Como Contribuir
1. **Fork** o reposit√≥rio
2. **Configure** ambiente de desenvolvimento  
3. **Teste** mudan√ßas thoroughly
4. **Documente** altera√ß√µes no README
5. **Submit** pull request com descri√ß√£o detalhada

### Boas Pr√°ticas para Issues
- **Inclua** vers√£o do navegador e da extens√£o
- **Anexe** logs do console (F12)
- **Descreva** passos para reproduzir problema
- **Especifique** comportamento esperado vs. atual

---

## üí° Dicas Avan√ßadas de Uso

### Workflows Recomendados

#### An√°lise Semanal de Ocupa√ß√£o
```
Segunda-feira:
1. Capture dados atualizados de todos os cursos
2. Exporte backup completo
3. Configure filtros por per√≠odo/campus
4. Gere relat√≥rios de ocupa√ß√£o por √°rea

Sexta-feira:
1. Compare com dados do in√≠cio da semana
2. Identifique mudan√ßas significativas  
3. Exporte deltas para an√°lise
4. Prepare relat√≥rios executivos
```

#### Gest√£o de Turmas
```
In√≠cio do Semestre:
1. Capture dados completos por curso
2. Configure presets espec√≠ficos por necessidade
3. Estabele√ßa filtros padr√£o por √°rea
4. Crie baseline de compara√ß√£o

Meio do Semestre:
1. Recapture dados atualizados
2. Use "üîÅ Mesclar" para combinar hist√≥rico
3. Analise mudan√ßas de matr√≠cula
4. Identifique tend√™ncias de ocupa√ß√£o
```

### Otimiza√ß√£o de Performance

#### Para Grandes Volumes
```javascript
// Configura√ß√£o recomendada em siaa-config.json
{
  "extraction": {
    "batchSize": 5,        // Reduzir para conex√µes lentas
    "delayBetweenBatches": 1200,  // Aumentar delay
    "timeout": 45000       // Timeout maior
  }
}
```

#### Limpeza Peri√≥dica
```
Mensalmente:
1. Execute "üîÑ Limpar Duplicatas" 
2. Remova dados obsoletos com "üóëÔ∏è Limpar Todos"
3. Recapture dados frescos
4. Reorganize presets conforme necessidade
```

---

**üéØ SIAA Data Extractor v2.0.5** - A ferramenta mais avan√ßada para an√°lise acad√™mica da Universidade Cruzeiro do Sul. Interface moderna, funcionalidades profissionais e confiabilidade empresarial.

---

*Desenvolvido com ‚ù§Ô∏è para a comunidade acad√™mica ‚Ä¢ Universidade Cruzeiro do Sul*